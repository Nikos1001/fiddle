
import 'io' as io
import 'fiddle/lib.pic' as fiddle
import 'random' as rnd

const msg := 'Piccolo'
var x := 0
var y := 0
var vx := 150
var vy := 150

fiddle.run('Piccolo DVD', 320, 240, 2, 2, fn dt -> {
    io.print('fps', 1 / dt)
    fiddle.text(msg, x, y)
    x = x + vx * dt
    y = y + vy * dt
    if x < 0 { 
        vx = -vx
        x = 0
        fiddle.fill(rnd.val(), rnd.val(), rnd.val())
    }
    if x + 8 * msg.length > fiddle.width() {
        vx = -vx
        x = fiddle.width() - 8 * msg.length
        fiddle.fill(rnd.val(), rnd.val(), rnd.val())
    }
    if y < 0 {
        vy = -vy
        y = 0
        fiddle.fill(rnd.val(), rnd.val(), rnd.val())
    }
    if y + 8 > fiddle.height() {
        vy = -vy
        y = fiddle.height() - 8
        fiddle.fill(rnd.val(), rnd.val(), rnd.val())
    }
})